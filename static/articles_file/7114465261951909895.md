æŒç»­åˆ›ä½œï¼ŒåŠ é€Ÿæˆé•¿ï¼è¿™æ˜¯æˆ‘å‚ä¸ã€Œæ˜é‡‘æ—¥æ–°è®¡åˆ’ Â· 6 æœˆæ›´æ–‡æŒ‘æˆ˜ã€çš„ç¬¬36å¤©ï¼Œ[ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…](https://juejin.cn/post/7099702781094674468 "https://juejin.cn/post/7099702781094674468")



# å¼•è¨€

 åœ¨oc ä¸­ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰è¢«å¼ºå¼•ç”¨ï¼Œä¼šè¢«ç«‹å³é‡Šæ”¾ã€‚  
 
  __weak è¡¨ç¤ºå¼±å¼•ç”¨  :
Assigning retained object to weak variable; object will be released after assignment

# I weak &strong



## 1.1 ä½¿ç”¨åœºæ™¯ï¼š

 æ§ä»¶çš„ä½¿ç”¨ :
1. å¦‚æœç•Œé¢çš„æ­å»ºï¼Œæ˜¯é‡‡ç”¨storyBoardè¿›è¡Œè¿æ¥ï¼Œæ§ä»¶å±æ€§ç”¨weakã€‚
2. å¦‚æœæ˜¯é‡‡ç”¨çº¯ä»£ç æ­å»ºç•Œé¢ï¼Œæ§ä»¶å¯ä»¥ä½¿ç”¨strongè¿›è¡Œä¿®é¥°ï¼›å› ä¸ºæ­¤æ—¶æ§ä»¶çš„å¯¹è±¡çš„ä¸¤ä¸ªå¼ºå¼•ç”¨ï¼ˆViewControllerçš„noLable,ä»¥åŠviewçš„subviewï¼‰éƒ½ä¼šéšç€æ§åˆ¶å™¨ViewControllerçš„é”€æ¯è€Œè¢«é‡Šæ”¾ã€‚

```objectivec
[self.view addSubview:_noLabel];
//å°†å¼±å¼•ç”¨å‚ç…§çš„_noLabelæ·»åŠ åˆ°è§†å›¾UIViewï¼›UIViewController.hï¼ã€‹@property(null_resettable, nonatomic,strong) UIView *view;ï¼ã€‹UIView.h :@property(nonatomic,readonly,copy) NSArray<__kindof UIView *> *subviews;ï¼ã€‹å¼ºå¼•ç”¨UILabelå¯¹è±¡ï¼Œæ‰€ä»¥è¿™ä¸ªUILabelå¯¹è±¡å·²ç»æœ‰æ‹¥æœ‰è€…ï¼Œä¸ä¼šè¢«æ”¾ï¼ï¼å†æ·»åŠ è¿‡ç¨‹éƒ½æ˜¯æ“ä½œUILabelå¯¹è±¡çš„åœ°å€
```


![   ocä¸­é‡Šæ”¾å¯¹è±¡çš„è¿‡ç¨‹:     ](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d1337496e0a4337b297435aa543d771~tplv-k3u1fbpfcp-zoom-1.image)

` é‡Šæ”¾å¯¹è±¡çš„è¿‡ç¨‹`ï¼š
1. ç¨‹åºå…ˆå¯¹æ§åˆ¶å™¨è¿›è¡Œé‡Šæ”¾ï¼Œå¦‚æœæ²¡æœ‰å¯¹è±¡å¯¹Viewè¿›è¡Œå¼ºå¼•ç”¨ï¼Œç¨‹åºå°†å¯¹viewè¿›è¡Œé‡Šæ”¾ã€‚
2. å†…å­˜ä¸­å¦‚æœæ²¡æœ‰å­˜åœ¨å¯¹subviews å¯¹è±¡è¿›è¡Œå¼ºå¼•ç”¨ï¼Œå°±é‡Šsubviewsã€‚
æ­¤æ—¶å¦‚æœUILabelå¯¹è±¡æ²¡æœ‰è¢«å¼ºå¼•ç”¨ï¼ŒUILabelå¯¹è±¡å°†è¢«é‡Šæ”¾ ã€‚

## 1.2 å±æ€§çš„ä¿®é¥°
1. åˆ›å»ºçš„è‡ªå®šä¹‰å¯¹è±¡ï¼Œéƒ½ç”¨strongã€‚
>å› ä¸ºè¿™äº›å¯¹è±¡ä¸ä¼šæœ‰UIViewControllerçš„æ§åˆ¶ï¼Œæ¥è¿›è¡Œå¼ºå¼•ç”¨ã€‚
>
 2. NSString ä½¿ç”¨copyï¼›NSStringåº”è¯¥ä½¿ç”¨copyè€Œä¸æ˜¯strongçš„å±æ€§ç‰¹æ€§ã€‚
 >å³ä½¿ä½ å£°æ˜ä¸€ä¸ªNSStringçš„å±æ€§ï¼Œæœ‰äººå¯èƒ½ä¼ å…¥ä¸€ä¸ªNSMutableStringçš„å®ä¾‹ï¼Œç„¶ååœ¨ä½ æ²¡æœ‰æ³¨æ„çš„æƒ…å†µä¸‹ä¿®æ”¹å®ƒã€‚
 >
3. æ•°å­—å‹çš„ï¼Œæ¯”å¦‚int ,å°±æ˜¯ä½¿ç”¨assignã€‚






## 1.3 weakå’Œstrongçš„ä¸åŒ
å½“ä¸€ä¸ªå¯¹è±¡ä¸å†æœ‰strongç±»å‹çš„æŒ‡é’ˆæŒ‡å‘å®ƒçš„æ—¶å€™ å®ƒä¼šè¢«é‡Šæ”¾ ï¼Œå³ä½¿è¿˜æœ‰weakå‹æŒ‡é’ˆæŒ‡å‘å®ƒã€‚ä¸€æ—¦æœ€åä¸€ä¸ªstrongå‹æŒ‡é’ˆç¦»å» ï¼Œè¿™ä¸ªå¯¹è±¡å°†è¢«é‡Šæ”¾ï¼Œæ‰€æœ‰å‰©ä½™çš„weakå‹æŒ‡é’ˆéƒ½å°†è¢«æ¸…é™¤ã€‚


ä¾‹å­:ã€€

1. æƒ³è±¡æˆ‘ä»¬çš„å¯¹è±¡æ˜¯ä¸€æ¡ç‹—ï¼Œç‹—æƒ³è¦è·‘æ‰ï¼ˆè¢«é‡Šæ”¾ï¼‰ã€‚ã€€ã€€strongå‹æŒ‡é’ˆå°±åƒæ˜¯æ “ä½çš„ç‹—ã€‚åªè¦ä½ ç”¨ç‰µç»³æŒ‚ä½ç‹—ï¼Œç‹—å°±ä¸ä¼šè·‘æ‰ã€‚å¦‚æœæœ‰5ä¸ªäººç‰µç€ä¸€æ¡ç‹—ï¼ˆ5ä¸ªstrongå‹æŒ‡é’ˆæŒ‡å‘1ä¸ªå¯¹è±¡ï¼‰ï¼Œé™¤é5ä¸ªç‰µç»³éƒ½è„±è½ ï¼Œå¦ç€ç‹—æ˜¯ä¸ä¼šè·‘æ‰çš„ã€‚ã€€ã€€

2. weakå‹æŒ‡é’ˆå°±åƒæ˜¯ä¸€ä¸ªå°å­©æŒ‡ç€ç‹—å–Šåˆ°ï¼šâ€œçœ‹ï¼ä¸€åªç‹—åœ¨é‚£â€ åªè¦ç‹—ä¸€ç›´è¢«æ “ç€ï¼Œå°å­©å°±èƒ½çœ‹åˆ°ç‹—ï¼Œï¼ˆweakæŒ‡é’ˆï¼‰ä¼šä¸€ç›´æŒ‡å‘å®ƒã€‚åªè¦ç‹—çš„ç‰µç»³è„±è½ï¼Œç‹—å°±ä¼šè·‘æ‰ï¼Œä¸ç®¡æœ‰å¤šå°‘å°å­©åœ¨çœ‹ç€å®ƒã€‚


# II tom åŸºæœ¬å®ç°ï¼ˆåºåˆ—å¸§åŠ¨ç”»ï¼‰

1. UIImageView å¸§åŠ¨ç”»çš„ä½¿ç”¨ 
2. UIImageçš„ä¸¤ç§åŠ è½½æ–¹å¼ :
>æœ‰ç¼“å­˜æ–¹å¼çš„åŠ è½½æ–¹æ³• 
>
>æ— ç¼“å­˜æ–¹å¼å°†å›¾ç‰‡åŠ è½½è‡³å†…å­˜  
>
3. é‡å¤ä»£ç çš„å°è£…æŠ½å–ï¼šç­‰ä¼˜åŒ–å®Œæ¯•ä¹‹åï¼Œåœ¨åˆ é™¤è¢«ä¼˜åŒ–çš„æ—§ä»£ç ï¼›
>å¸¸è§çš„ä¼˜åŒ–ç‚¹æœ‰: `æ•°æ®ç‹¬ç«‹æ€§çš„å¤„ç†ï¼ˆplistã€ç½‘ç»œï¼‰ã€é­”æ³•æ•°å­—çš„é—®é¢˜è§£å†³ï¼ˆå®ï¼Œæšä¸¾enumï¼‰ã€å±æ€§çš„æ‡’åŠ è½½ï¼ˆé‡å†™getteræ–¹æ³•ï¼‰ `

 
ä»£ç ç¤ºä¾‹
```objectivec
/**
 
  åºåˆ—å¸§åŠ¨ç”»ï¼šé¡ºåºæ’­æ”¾ä¸€ç»„å›¾ç‰‡
 
 1.æç¤ºã€å¦‚æœæ”¾ç½®äºAssets.xcassetsç›®å½•ä¸­çš„å›¾ç‰‡ä¸èƒ½ä½¿ç”¨imageWithContentsOfFile:pathè¿›è¡ŒåŠ è½½ï¼Œåªèƒ½ä½¿ç”¨imageNameè¿›è¡ŒåŠ è½½ï¼Œå³å†…å­˜ç”±ç³»ç»Ÿè´Ÿè´£äº†ï¼›Assets.xcassets å­˜æ”¾ä¸€äº›ç»å¸¸ä½¿ç”¨çš„å°å›¾ç‰‡ç´ æ
 
 2ã€‚Supporting Files ç›®å½•é€šå¸¸å­˜æ”¾ï¼Œå¤§ã€ä¸ç»å¸¸ä½¿ç”¨çš„å›¾ç‰‡ï¼›
 
 */
 
- (void) frameAnimation : (UIButton *) button{
    //å¦‚æœæ­£åœ¨åŠ¨ç”»æ’­æ”¾ç›´æ¥é€€å‡ºï¼Œæ¥ä¿è¯ä¿è¯ä¸€ä¸ªåŠ¨ç”»æ’­æ”¾å®Œæˆ
    if ([self.imageList isAnimating]) {//è€ƒè™‘ç”¨æˆ·çš„é‡å¤ç‚¹å‡»è¿›è¡Œé¢‘ç¹çš„å±•ç¤ºå¸§åŠ¨ç”»é—®é¢˜
        return;
    }
    //é¡ºåºçš„æ”¹å˜UIImageView çš„imageï¼Œæ­¤æ—¶éœ€è¦çš„å‚æ•°æœ‰ï¼šéœ€è¦æ’­æ”¾çš„åºåˆ—å¸§å›¾ç‰‡æ•°ç»„animationImagesï¼ˆUIImageå¯¹è±¡ï¼‰ã€å¸§åŠ¨ç”»çš„æŒç»­æ—¶é—´animationDurationã€å¸§åŠ¨ç”»çš„æ‰§è¡Œæ¬¡æ•°animationRepeatCountï¼ï¼å¯è‡ªè¡ŒæŸ¥çœ‹UIImageViewçš„å±æ€§å’Œæ–¹æ³•
    //åŠ¨ç”»å›¾ç‰‡çš„æ•°ç»„ï¼ï¼å¯ä¿®æ”¹çš„æ•°ç»„NSMutableArray(manage a modifiable array of objects)
    NSMutableArray *arrayImage = [NSMutableArray array];//Creates and returns an empty array.
    //æ·»åŠ å¸§åŠ¨ç”»æ’­æ”¾çš„å›¾ç‰‡
    //è®¾ç½®å›¾ç‰‡çš„æ•°ç»„çš„
    for (int i = 0; i< self.animationImages[button.tag].count ; i++) {
        //è·å–å›¾ç‰‡åç§°
        NSString *pictureNamePrefix = self.animationImages[button.tag][i];//è·å–æ–‡ä»¶åï¼‹æ‰©å±•å       
 
        //æ–¹å¼ä¸€ï¼šæœ‰ç¼“å­˜åŠ è½½å›¾ç‰‡
        // æ·»åŠ Imageçš„å¯¹è±¡åˆ°å¸§å›¾ç‰‡æ•°ç»„
//       [arrayImage addObject: [UIImage imageNamed:pictureNamePrefix]];//å‚æ•°ä¸ºå›¾ç‰‡åç§°ï¼Œpng æ ¼å¼çš„å¯ä»¥ä¸åŠ æ‰©å±•å
         
 
        //æ–¹å¼äºŒï¼šæ— ç¼“å­˜æ–¹å¼åŠ è½½å›¾ç‰‡ï¼æŒ‡å®šæ‰©å±•å
//        NSArray *arrayPicture = [pictureNamePrefix componentsSeparatedByString:@"."];//ä»å­—ç¬¦ä¸­åˆ†éš”æˆ2ä¸ªå…ƒç´ çš„æ•°ç»„ï¼ˆå›¾ç‰‡åï¼‹æ‰©å±•åï¼‰
//        NSString *path = [[NSBundle mainBundle] pathForResource:arrayPicture[0] ofType: arrayPicture[1]];//è·å–å›¾ç‰‡çš„å…¨è·¯å¾„
 
        //æ–¹å¼äºŒï¼šæ— ç¼“å­˜æ–¹å¼åŠ è½½å›¾ç‰‡ï¼ä¸æŒ‡å®šæ‰©å±•å
        NSString *path = [[NSBundle mainBundle] pathForResource:pictureNamePrefix ofType:nil];
        [arrayImage addObject:[ UIImage imageWithContentsOfFile:path]];
    }
    [self.imageList setAnimationImages:arrayImage];
    //è®¾ç½®å¸§åŠ¨ç”»çš„æŒç»­æ—¶é—´
    [self.imageList setAnimationDuration: self.imageList.animationImages.count * 0.1];
    //è®¾ç½®å¸§åŠ¨ç”»çš„æ‰§è¡Œæ¬¡æ•°
    [self.imageList setAnimationRepeatCount:1];
 
     //å¼€å§‹åŠ¨ç”»
 
    [self.imageList startAnimating];
 
    //é‡Šæ”¾èµ„æºï¼šåŠ¨ç”»ç»“æŸä¹‹åæ¸…é™¤å¸§åŠ¨ç”»æ•°ç»„
 
    //nvokes a method of the receiver on the current thread using the default mode after a delay.
 
//    [self performSelector:@selector(cleanUpAnimationsArray) withObject:nil afterDelay:self.imageList.animationDuration];//å®šä¹‰åœ¨NSObjectçš„åˆ†ç±»ä¸­@interface NSObject (NSDelayedPerforming)
 
     
 
    //æ¸…é™¤å†…å­˜çš„ä»£ç ç®€åŒ–ï¼ï¼å¯ä»¥é¿å…å®šä¹‰cleanUpAnimationsArrayæ–¹æ³•
 
    [self.imageList performSelector:@selector(setAnimationImages:) withObject:nil afterDelay:self.imageList.animationDuration];
 
}
```


# see also 

iOSè§£å†³å‹ç¼©ä¹‹åå›¾ç‰‡æ¨¡ç³Šçš„é—®é¢˜
>[https://blog.csdn.net/z929118967/article/details/105414506](https://blog.csdn.net/z929118967/article/details/105414506)

                                 


ğŸ… è”ç³»ä½œè€…ï¼š iOSé€†å‘ï¼ˆå…¬å·ï¼šiosrevï¼‰

---------
ğŸ… ä½œè€…ç®€ä»‹ï¼šCSDN åšå®¢ä¸“å®¶è®¤è¯ğŸ†ä¸¨å…¨ç«™ Top 50ã€åä¸ºäº‘äº‘äº«ä¸“å®¶è®¤è¯ğŸ†ã€iOSé€†å‘å…¬å·å·ä¸»

---------
ğŸ… ç®€å†æ¨¡æ¿ã€æŠ€æœ¯äº’åŠ©ã€‚å…³æ³¨æˆ‘ï¼Œéƒ½ç»™ä½ ã€‚


